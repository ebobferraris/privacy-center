// Multilingual System for Privacy Center
// AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
// Generated on: 2025-09-08T16:42:58.893Z
// Source: src/_data/locales/*.json

const translations = {
  "de": {
    "ui": {
      "companyName": "PPE Corp.",
      "copyright": "Alle Rechte vorbehalten.",
      "privacyCenter": "Privacy Center",
      "subtitle": "hier finden Sie die Datenschutzhinweise aller unserer Produkte",
      "backToHome": "â† ZurÃ¼ck zur Startseite",
      "selectLanguage": "Sprache auswÃ¤hlen",
      "chooseLanguage": "WÃ¤hlen Sie die Sprache, in der Sie die {app}-Datenschutzhinweis anzeigen mÃ¶chten:",
      "mainLanguage": "Hauptsprache",
      "translation": "Ãœbersetzung",
      "viewInItalian": "Auf Italienisch anzeigen",
      "viewInEnglish": "Auf Englisch anzeigen",
      "viewInFrench": "Auf FranzÃ¶sisch anzeigen",
      "viewInGerman": "Auf Deutsch anzeigen",
      "viewInSlovenian": "Auf Slowenisch anzeigen",
      "viewInIt": "Auf Italienisch anzeigen",
      "viewInEn": "Auf Englisch anzeigen",
      "viewInFr": "Auf FranzÃ¶sisch anzeigen",
      "viewInDe": "Auf Deutsch anzeigen",
      "viewInSl": "Auf Slowenisch anzeigen",
      "currentLang": "ðŸ‡©ðŸ‡ª DE",
      "searchPlaceholder": "Hinweise durchsuchen...",
      "search": "Suchen",
      "read": "Lesen",
      "privacyNotice": "Datenschutzhinweis",
      "version": "Version",
      "latest": "neueste",
      "lastUpdated": "Zuletzt aktualisiert: {date}",
      "whatsNew": "Was ist neu in Version {version}",
      "contentNotAvailable": "Inhalt der Mitteilung nicht verfÃ¼gbar.",
      "availablePrivacyNotices": "VerfÃ¼gbare Datenschutzhinweise",
      "archivedVersion": "Archivierte Version {version}",
      "archivedVersionText": "Dies ist eine archivierte Version des Datenschutzhinweises. Neueste Version anzeigen",
      "viewLatestVersion": "Neueste Version anzeigen",
      "outdatedTranslation": "Veraltete Ãœbersetzung",
      "outdatedTranslationText": "Diese Ãœbersetzung basiert auf einer Ã¤lteren Version als der italienischen Version. Neueste italienische Version anzeigen",
      "viewLatestItalianVersion": "Neueste italienische Version anzeigen",
      "latestVersion": "{version} (neueste)"
    },
    "warnings": {
      "translationUnavailable": "Ãœbersetzung nicht verfÃ¼gbar",
      "translationUnavailableDesc": "Die angeforderte Ãœbersetzung ist noch nicht verfÃ¼gbar. Nachfolgend finden Sie die derzeit verfÃ¼gbaren Sprachversionen fÃ¼r diese Mitteilung."
    },
    "languages": {
      "it": "Italiano",
      "en": "English",
      "fr": "FranÃ§ais",
      "de": "Deutsch",
      "sl": "SlovenÅ¡Äina"
    }
  },
  "en": {
    "ui": {
      "companyName": "PPE Corp.",
      "copyright": "All rights reserved.",
      "privacyCenter": "Privacy Center",
      "subtitle": "here you can find the privacy notices of all our products",
      "backToHome": "â† Back to home",
      "selectLanguage": "Select a language",
      "chooseLanguage": "Choose the language in which you want to view the {app} privacy notice:",
      "mainLanguage": "Main language",
      "translation": "Translation",
      "viewInItalian": "View in Italian",
      "viewInEnglish": "View in English",
      "viewInFrench": "View in French",
      "viewInGerman": "View in German",
      "viewInSlovenian": "View in Slovenian",
      "viewInIt": "View in Italian",
      "viewInEn": "View in English",
      "viewInFr": "View in French",
      "viewInDe": "View in German",
      "viewInSl": "View in Slovenian",
      "currentLang": "ðŸ‡¬ðŸ‡§ EN",
      "searchPlaceholder": "Search notices...",
      "search": "Search",
      "read": "Read",
      "privacyNotice": "Privacy Notice",
      "version": "Version",
      "latest": "latest",
      "lastUpdated": "Last updated: {date}",
      "whatsNew": "What's New in version {version}",
      "contentNotAvailable": "Notice content not available.",
      "availablePrivacyNotices": "Available Privacy Notices",
      "archivedVersion": "Archived Version {version}",
      "archivedVersionText": "This is an archived version of the privacy notice. View latest version",
      "viewLatestVersion": "View latest version",
      "outdatedTranslation": "Outdated Translation",
      "outdatedTranslationText": "This translation is based on an older version than the Italian version. View latest Italian version",
      "viewLatestItalianVersion": "View latest Italian version",
      "latestVersion": "{version} (latest)"
    },
    "warnings": {
      "translationUnavailable": "Translation not available",
      "translationUnavailableDesc": "The requested translation is not yet available. Below you can find the currently available language versions for this notice."
    },
    "languages": {
      "it": "Italiano",
      "en": "English",
      "fr": "FranÃ§ais",
      "de": "Deutsch",
      "sl": "SlovenÅ¡Äina"
    }
  },
  "fr": {
    "ui": {
      "companyName": "PPE Corp.",
      "copyright": "Tous droits rÃ©servÃ©s.",
      "privacyCenter": "Privacy Center",
      "subtitle": "ici vous pouvez trouver les notices de confidentialitÃ© de tous nos produits",
      "backToHome": "â† Retour Ã  l'accueil",
      "selectLanguage": "SÃ©lectionnez une langue",
      "chooseLanguage": "Choisissez la langue dans laquelle vous souhaitez consulter l'avis de confidentialitÃ© {app} :",
      "mainLanguage": "Langue principale",
      "translation": "Traduction",
      "viewInItalian": "Voir en italien",
      "viewInEnglish": "Voir en anglais",
      "viewInFrench": "Voir en franÃ§ais",
      "viewInGerman": "Voir en allemand",
      "viewInSlovenian": "Voir en slovÃ¨ne",
      "viewInIt": "Voir en Italien",
      "viewInEn": "Voir en Anglais",
      "viewInFr": "Voir en FranÃ§ais",
      "viewInDe": "Voir en Allemand",
      "viewInSl": "Voir en SlovÃ¨ne",
      "currentLang": "ðŸ‡«ðŸ‡· FR",
      "searchPlaceholder": "Rechercher des avis...",
      "search": "Rechercher",
      "read": "Lire",
      "privacyNotice": "Avis de confidentialitÃ©",
      "version": "Version",
      "latest": "derniÃ¨re",
      "lastUpdated": "DerniÃ¨re mise Ã  jour: {date}",
      "whatsNew": "NouveautÃ©s dans la version {version}",
      "contentNotAvailable": "Contenu de l'avis non disponible.",
      "availablePrivacyNotices": "Avis de ConfidentialitÃ© Disponibles",
      "archivedVersion": "Version ArchivÃ©e {version}",
      "archivedVersionText": "Ceci est une version archivÃ©e de l'avis de confidentialitÃ©. Voir la derniÃ¨re version",
      "viewLatestVersion": "Voir la derniÃ¨re version",
      "outdatedTranslation": "Traduction ObsolÃ¨te",
      "outdatedTranslationText": "Cette traduction est basÃ©e sur une version plus ancienne que la version italienne. Voir la derniÃ¨re version italienne",
      "viewLatestItalianVersion": "Voir la derniÃ¨re version italienne",
      "latestVersion": "{version} (derniÃ¨re)"
    },
    "warnings": {
      "translationUnavailable": "Traduction non disponible",
      "translationUnavailableDesc": "La traduction demandÃ©e n'est pas encore disponible. Vous trouverez ci-dessous les versions linguistiques actuellement disponibles pour cette notice."
    },
    "languages": {
      "it": "Italiano",
      "en": "English",
      "fr": "FranÃ§ais",
      "de": "Deutsch",
      "sl": "SlovenÅ¡Äina"
    }
  },
  "it": {
    "ui": {
      "companyName": "PPE Corp.",
      "copyright": "Tutti i diritti riservati.",
      "privacyCenter": "Privacy Center",
      "subtitle": "qui puoi trovare le informative privacy di tutti i nostri prodotti",
      "backToHome": "â† Torna alla home",
      "selectLanguage": "Seleziona una lingua",
      "chooseLanguage": "Scegli la lingua in cui desideri visualizzare l'informativa per {app}:",
      "mainLanguage": "Lingua principale",
      "translation": "Traduzione",
      "viewInItalian": "Visualizza in Italiano",
      "viewInEnglish": "View in English",
      "viewInFrench": "Visualizza in Francese",
      "viewInGerman": "Visualizza in Tedesco",
      "viewInSlovenian": "Visualizza in Sloveno",
      "viewInIt": "Visualizza in Italiano",
      "viewInEn": "Visualizza in Inglese",
      "viewInFr": "Visualizza in Francese",
      "viewInDe": "Visualizza in Tedesco",
      "viewInSl": "Visualizza in Sloveno",
      "currentLang": "ðŸ‡®ðŸ‡¹ IT",
      "searchPlaceholder": "Cerca informative...",
      "search": "Cerca",
      "read": "Leggi",
      "privacyNotice": "Informativa privacy",
      "version": "Versione",
      "latest": "piÃ¹ recente",
      "lastUpdated": "Ultimo aggiornamento: {date}",
      "whatsNew": "NovitÃ  nella versione {version}",
      "contentNotAvailable": "Contenuto dell'informativa non disponibile.",
      "availablePrivacyNotices": "Informative disponibili",
      "archivedVersion": "Versione Archiviata {version}",
      "archivedVersionText": "Questa Ã¨ una versione archiviata dell'informativa privacy. Visualizza versione piÃ¹ recente",
      "viewLatestVersion": "Visualizza versione piÃ¹ recente",
      "outdatedTranslation": "Traduzione Obsoleta",
      "outdatedTranslationText": "Questa traduzione Ã¨ basata su una versione piÃ¹ vecchia rispetto alla versione italiana. Visualizza ultima versione italiana",
      "viewLatestItalianVersion": "Visualizza ultima versione italiana",
      "latestVersion": "{version} (piÃ¹ recente)"
    },
    "warnings": {
      "translationUnavailable": "Traduzione non disponibile",
      "translationUnavailableDesc": "La traduzione richiesta non Ã¨ ancora disponibile. Di seguito trovi le versioni linguistiche attualmente disponibili per questa informativa."
    },
    "languages": {
      "it": "Italiano",
      "en": "English",
      "fr": "FranÃ§ais",
      "de": "Deutsch",
      "sl": "SlovenÅ¡Äina"
    }
  },
  "sl": {
    "ui": {
      "companyName": "PPE Corp.",
      "copyright": "Vse pravice pridrÅ¾ane.",
      "privacyCenter": "Privacy Center",
      "subtitle": "tukaj najdete obvestila o zasebnosti vseh naÅ¡ih izdelkov",
      "backToHome": "â† Nazaj na domaÄo stran",
      "selectLanguage": "Izberite jezik",
      "chooseLanguage": "Izberite jezik, v katerem Å¾elite pregledati obvestilo o zasebnosti {app}:",
      "mainLanguage": "Glavni jezik",
      "translation": "Prevod",
      "viewInItalian": "Ogled v italijanÅ¡Äini",
      "viewInEnglish": "Ogled v angleÅ¡Äini",
      "viewInFrench": "Ogled v francoÅ¡Äini",
      "viewInGerman": "Ogled v nemÅ¡Äini",
      "viewInSlovenian": "Ogled v slovenÅ¡Äini",
      "viewInIt": "PrikaÅ¾i v ItalijanÅ¡Äini",
      "viewInEn": "PrikaÅ¾i v AngleÅ¡Äini",
      "viewInFr": "PrikaÅ¾i v FrancoÅ¡Äini",
      "viewInDe": "PrikaÅ¾i v NemÅ¡Äini",
      "viewInSl": "PrikaÅ¾i v SlovenÅ¡Äini",
      "currentLang": "ðŸ‡¸ðŸ‡® SL",
      "searchPlaceholder": "Iskanje obvestil...",
      "search": "Iskanje",
      "read": "Preberi",
      "privacyNotice": "Obvestilo o zasebnosti",
      "version": "RazliÄica",
      "latest": "najnovejÅ¡a",
      "lastUpdated": "Zadnja posodobitev: {date}",
      "whatsNew": "Kaj je novega v razliÄici {version}",
      "contentNotAvailable": "Vsebina obvestila ni na voljo.",
      "availablePrivacyNotices": "RazpoloÅ¾ljiva Obvestila o Zasebnosti",
      "archivedVersion": "Arhivirana RazliÄica {version}",
      "archivedVersionText": "To je arhivirana razliÄica obvestila o zasebnosti. PrikaÅ¾i najnovejÅ¡o razliÄico",
      "viewLatestVersion": "PrikaÅ¾i najnovejÅ¡o razliÄico",
      "outdatedTranslation": "Zastarel Prevod",
      "outdatedTranslationText": "Ta prevod temelji na starejÅ¡i razliÄici kot italijanska razliÄica. PrikaÅ¾i najnovejÅ¡o italijansko razliÄico",
      "viewLatestItalianVersion": "PrikaÅ¾i najnovejÅ¡o italijansko razliÄico",
      "latestVersion": "{version} (najnovejÅ¡a)"
    },
    "warnings": {
      "translationUnavailable": "Prevod ni na voljo",
      "translationUnavailableDesc": "Zahtevani prevod Å¡e ni na voljo. Spodaj najdete trenutno razpoloÅ¾ljive jezikovne razliÄice za to obvestilo."
    },
    "languages": {
      "it": "Italiano",
      "en": "English",
      "fr": "FranÃ§ais",
      "de": "Deutsch",
      "sl": "SlovenÅ¡Äina"
    }
  }
};

// Language detection and management
class LanguageManager {
  constructor() {
    this.translations = translations;
    this.currentLang = this.detectLanguage();
    this.observers = new Set();
  }

  detectLanguage() {
    try {
      // For project/notice pages, always respect sessionStorage
      const currentPath = window.location.pathname;
      const isProjectOrNoticePage = currentPath.includes('/notices/');
      
      if (isProjectOrNoticePage) {
        const sessionLang = sessionStorage.getItem('selectedLanguage');
        if (sessionLang && this.translations[sessionLang]) {
          return sessionLang;
        }
      }

      // Check sessionStorage first (user's selected language)
      const sessionLang = sessionStorage.getItem('selectedLanguage');
      if (sessionLang && this.translations[sessionLang]) {
        return sessionLang;
      }

      // Check URL path
      const pathLang = window.location.pathname.split('/')[1];
      if (pathLang && this.translations[pathLang]) {
        return pathLang;
      }

      // Check localStorage
      const storedLang = localStorage.getItem('privacy-center-lang');
      if (storedLang && this.translations[storedLang]) {
        return storedLang;
      }

      // Check browser language
      if (typeof navigator !== 'undefined' && navigator.language) {
        const browserLang = navigator.language.split('-')[0];
        if (this.translations[browserLang]) {
          return browserLang;
        }
      }

      // Default to Italian
      return 'it';
    } catch (error) {
      console.error('Error detecting language:', error);
      return 'it'; // Fallback to default
    }
  }

  setLanguage(lang) {
    try {
      if (this.translations[lang]) {
        this.currentLang = lang;

        // Safely store in localStorage
        if (typeof Storage !== 'undefined') {
          try {
            localStorage.setItem('privacy-center-lang', lang);
          } catch (storageError) {
            console.warn('Error storing language in localStorage:', storageError);
          }
        }

        // Store in sessionStorage for immediate use
        sessionStorage.setItem('selectedLanguage', lang);

        // Notify all observers
        this.observers.forEach(callback => {
          try {
            callback(lang);
          } catch (error) {
            console.error('Error in language change observer:', error);
          }
        });

        // Update URL if not already correct (only in production)
        if (typeof window !== 'undefined' && window.location && window.location.hostname !== 'localhost') {
          const currentPath = window.location.pathname;
          const pathLang = currentPath.split('/')[1];

          if (pathLang !== lang) {
            const newPath = currentPath.replace(/^\/[^\/]*/, `/${lang}`);
            window.location.href = newPath;
          }
        }

        return true;
      }
      return false;
    } catch (error) {
      console.error('Error setting language:', error);
      return false;
    }
  }

  getTranslation(key, fallback = '') {
    try {
      if (!key || typeof key !== 'string') {
        console.warn('Invalid translation key:', key);
        return fallback;
      }

      // For project/notice pages, always check sessionStorage first
      const currentPath = window.location.pathname;
      const isProjectOrNoticePage = currentPath.includes('/notices/');
      
      let targetLang = this.currentLang;
      if (isProjectOrNoticePage) {
        const sessionLang = sessionStorage.getItem('selectedLanguage');
        if (sessionLang && this.translations[sessionLang]) {
          targetLang = sessionLang;
        }
      }

      const keys = key.split('.');
      let value = this.translations[targetLang];

      for (const k of keys) {
        if (value && typeof value === 'object' && k in value) {
          value = value[k];
        } else {
          value = undefined;
          break;
        }
      }

      return (typeof value === 'string') ? value : fallback;
    } catch (error) {
      console.error('Error getting translation for key:', key, error);
      return fallback;
    }
  }

  getCurrentTranslations() {
    try {
      return this.translations[this.currentLang] || {};
    } catch (error) {
      console.error('Error getting current translations:', error);
      return {};
    }
  }

  getAvailableLanguages() {
    try {
      return Object.keys(this.translations);
    } catch (error) {
      console.error('Error getting available languages:', error);
      return ['it']; // Fallback to default
    }
  }

  // Pattern Observer per aggiornamenti automatici
  subscribe(callback) {
    this.observers.add(callback);
  }

  unsubscribe(callback) {
    this.observers.delete(callback);
  }

  // Genera chiavi dinamiche per le lingue
  getViewInLanguageKey(langCode) {
    const langMap = { it: 'It', en: 'En', fr: 'Fr', de: 'De', sl: 'Sl' };
    return `viewIn${langMap[langCode] || langCode.toUpperCase()}`;
  }

  // Sostituisce parametri in una stringa di traduzione
  replaceParams(translation, params = {}) {
    if (typeof translation !== 'string' || !params) {
      return translation;
    }

    let result = translation;
    Object.keys(params).forEach(param => {
      result = result.replace(new RegExp(`{${param}}`, 'g'), params[param]);
    });
    return result;
  }
}

// Global language manager instance
const langManager = new LanguageManager();

// Export for global use
window.LanguageManager = LanguageManager;
window.langManager = langManager;

// Auto-update translatable elements when language changes
langManager.subscribe((newLang) => {
  console.log('Language changed to:', newLang);
  
  // Update all elements with data-translate attribute
  const translatableElements = document.querySelectorAll('[data-translate]');
  translatableElements.forEach(element => {
    try {
      const key = element.getAttribute('data-translate');
      const paramsAttr = element.getAttribute('data-translate-params');
      
      let translation = langManager.getTranslation(key);
      
      // Handle special cases
      if (key === 'ui.chooseLanguage' || key === 'chooseLanguage') {
        const appName = element.closest('.notice-placeholder')?.querySelector('h1')?.textContent?.split(' - ')[0];
        if (appName) {
          translation = langManager.replaceParams(translation, { app: appName });
        }
      }
      
      // Handle parameters from data attribute
      if (paramsAttr) {
        try {
          const params = JSON.parse(paramsAttr);
          translation = langManager.replaceParams(translation, params);
        } catch (error) {
          console.warn('Invalid data-translate-params:', paramsAttr);
        }
      }
      
      if (translation && translation !== key) {
        if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'search')) {
          element.placeholder = translation;
        } else if (element.tagName === 'TEXTAREA') {
          element.placeholder = translation;
        } else {
          element.textContent = translation;
        }
      }
    } catch (error) {
      console.error('Error updating translatable element:', error);
    }
  });
  
  // Update elements with data-translate-title attribute
  const titleElements = document.querySelectorAll('[data-translate-title]');
  titleElements.forEach(element => {
    try {
      const key = element.getAttribute('data-translate-title');
      const translation = langManager.getTranslation(key);
      if (translation && translation !== key) {
        element.title = translation;
      }
    } catch (error) {
      console.error('Error updating title element:', error);
    }
  });
});

// Initialize translations on page load
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM loaded, initializing translations...');
  
  // Wait a bit to ensure all scripts are loaded
  setTimeout(() => {
    try {
      // Update all translatable elements immediately
      const translatableElements = document.querySelectorAll('[data-translate]');
      translatableElements.forEach(element => {
        try {
          const key = element.getAttribute('data-translate');
          const paramsAttr = element.getAttribute('data-translate-params');
          
          let translation = langManager.getTranslation(key);
          
          // Handle special cases
          if (key === 'ui.chooseLanguage' || key === 'chooseLanguage') {
            const appName = element.closest('.notice-placeholder')?.querySelector('h1')?.textContent?.split(' - ')[0];
            if (appName) {
              translation = langManager.replaceParams(translation, { app: appName });
            }
          }
          
          // Handle parameters from data attribute
          if (paramsAttr) {
            try {
              const params = JSON.parse(paramsAttr);
              translation = langManager.replaceParams(translation, params);
            } catch (error) {
              console.warn('Invalid data-translate-params:', paramsAttr);
            }
          }
          
          if (translation && translation !== key) {
            if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'search')) {
              element.placeholder = translation;
            } else if (element.tagName === 'TEXTAREA') {
              element.placeholder = translation;
            } else {
              element.textContent = translation;
            }
          }
        } catch (error) {
          console.error('Error updating translatable element:', error);
        }
      });
      
      // Update elements with data-translate-title attribute
      const titleElements = document.querySelectorAll('[data-translate-title]');
      titleElements.forEach(element => {
        try {
          const key = element.getAttribute('data-translate-title');
          const translation = langManager.getTranslation(key);
          if (translation && translation !== key) {
            element.title = translation;
          }
        } catch (error) {
          console.error('Error updating title element:', error);
        }
      });
      
      console.log('Initial translations applied');
    } catch (error) {
      console.error('Error applying initial translations:', error);
    }
  }, 100);
});

// Global function to update all translatable elements (for compatibility with main.js)
window.updateAllTranslatableElements = function() {
  try {
    // Update all translatable elements immediately
    const translatableElements = document.querySelectorAll('[data-translate]');
    translatableElements.forEach(element => {
      try {
        const key = element.getAttribute('data-translate');
        const paramsAttr = element.getAttribute('data-translate-params');
        
        let translation = langManager.getTranslation(key);
        
        // Handle special cases
        if (key === 'ui.chooseLanguage' || key === 'chooseLanguage') {
          const appName = element.closest('.notice-placeholder')?.querySelector('h1')?.textContent?.split(' - ')[0];
          if (appName) {
            translation = langManager.replaceParams(translation, { app: appName });
          }
        }
        
        // Handle parameters from data attribute
        if (paramsAttr) {
          try {
            const params = JSON.parse(paramsAttr);
            translation = langManager.replaceParams(translation, params);
          } catch (error) {
            console.warn('Invalid data-translate-params:', paramsAttr);
          }
        }
        
        if (translation && translation !== key) {
          if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'search')) {
            element.placeholder = translation;
          } else if (element.tagName === 'TEXTAREA') {
            element.placeholder = translation;
          } else {
            element.textContent = translation;
          }
        }
      } catch (error) {
        console.error('Error updating translatable element:', error);
      }
    });
    
    // Update elements with data-translate-title attribute
    const titleElements = document.querySelectorAll('[data-translate-title]');
    titleElements.forEach(element => {
      try {
        const key = element.getAttribute('data-translate-title');
        const translation = langManager.getTranslation(key);
        if (translation && translation !== key) {
          element.title = translation;
        }
      } catch (error) {
        console.error('Error updating title element:', error);
      }
    });
    
    console.log('All translatable elements updated');
  } catch (error) {
    console.error('Error updating all translatable elements:', error);
  }
};

console.log('âœ… Language system initialized with', Object.keys(translations).length, 'languages');
